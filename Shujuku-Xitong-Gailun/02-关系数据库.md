# 第二章 关系数据库
- 提出关系模型的是美国BM公司的E.F.Codd
    - 1970年提出关系数据模型
    - 之后，提出了关系代数和关系演算的概念
    - 1972年提出了关系的第一、第二、第三范式
    - 1974年提出了关系的BC范式

## 2.1 关系数据结构及形式化定义

### 2.1.1 关系
- 单一的数据结构：关系
    - 现实世界的实体以及实体间的各种联系均用关系来表示 
- 逻辑结构：二维表
    - 从用户角度，关系模型中数据的逻辑结构是一张二维表 
- 建立在集合代数的基础上

关系由三个元素构成：
- 域
- 笛卡尔积
- 关系

#### 域
- 域是一组具有相同数据类型的值的集合。



#### 笛卡尔积
- 是所有域的所有取值的一个组合
- 元组
    - 笛卡尔积中每一个元素叫作一个n元组或简称元组
- 分量
    - 笛卡尔积元素中的每一个值叫作一个分量
- 基数

#### 笛卡尔积的表示方法
- 笛卡尔积可表示为一张二维表
- 表中的每行对应一个元组，表中的每列对应一个域

#### 关系
1. 关系
2. 元组
    - 关系中的每个元素是关系中的元组，通常用t表示。 
3. 单元关系与二元关系
    - 当n=1时，称该关系为单元关系或一元关系
    - 当n=2时，称该关系为二元关系
4. 关系的表示
    - 关系是一个二维表，表的每行对应一个元组，表的每列对应一个域 
5. 属性
    - 关系中不同列可以对应相同的域
    - 为了加以区分，必须对每列起一个名字，称为属性. n目关系必有n个属性
6. 码
    - 候选码
    - 全码
    - 主码
    - 主属性

### 2.1.2 关系模式
- 关系模式是型 
- 关系是值 
- 关系模式是对关系的描述
    - 元组集合的结构
        - 属性构成
        - 属性来自的域
        - 属性与域之间的映象关系
    - 完整性约束条件

### 2.1.3 关系数据库
- 关系数据库
    - 在一个给定的应用领域中，所有关系的集合构成一个关系数据库 
- 关系数据库的型与值
    - 关系数据库的型：关系数据库模式，是对关系数据库的描述
    - 关系数据库的值：关系模式在某一时刻对应的关系的集合，通常称为关系数据库

### 2.1.4 关系模型的存储结构
- 关系数据库的物理组织
    - 有的关系数据库管理系统中一个表对应一个操作系统 文件，将物理数据组织交给操作系统完成
    - 有的关系数据库管理系统从操作系统那里申请若干个 大的文件，自己划分文件空间，组织表、索引等存储 结构，并进行存储管理

## 2.2 关系操作

### 2.2.1 基本的关系操作
-  常用的关系操作
    - 查询：选择、投影、连接、除、并、差、交、笛卡尔积
        - 选择、投影、并、差、笛卡尔积是5种基本操作
    - 更新：插入、删除、修改 
- 关系操作的特点
    - 集合操作方式：操作的对象和结果都是集合，一次一集合的方式
-  关系代数语言
    - 用对关系的运算来表达查询要求
    - 代表：ISBL
-  关系演算语言：用谓词来表达查询要求
    - 元组关系演算语言
    - 域关系演算语言
-  具有关系代数和关系演算双重特点的语言
    - 代表：SQL

## 2.3 关系的完整性
关系的三类完整性约束：
- 实体完整性和参照完整性
    - 关系模型必须满足的完整性约束条件称为关系的两个不变性，应该由关系系统自动支持 
- 用户定义的完整性
    - 应用领域需要遵循的约束条件，体现了具体领域中的语义约束

### 2.3.1 实体完整性
- 实体完整性规则
    - 若属性A是基本关系R的主属性，则属性A不能取空值
    - 空值就是“不知道”或“不存在”或“无意义”的值 
- 例：
    - 选修（学号，课程号，成绩） • “学号、课程号”为主码 • “学号”和“课程号”两个属性都不能取空值


### 2.3.2 参照完整性

1. 关系见的引用
    - 在关系模型中实体及实体间的联系都是用关系来描述的，自然存在着关系与关系间的引用。

### 2.3.3 用户定义的完整性
- 针对某一具体关系数据库的约束条件，反映某一具体应用所涉及的数据必须满足的语义要求。 
- 关系模型应提供定义和检验这类完整性的机制，以便用统一的系统的方法处理它们，而不需由应 用程序承担这一功能。

## 2.4 关系代数
- 关系代数是一种抽象的查询语言，它用对关系的运算来表达查询 
- 关系代数
    - 运算对象是关系
    - 运算结果亦为关系
    - 关系代数的运算符有两类：集合运算符和专门的关系运算符 
- 传统的集合运算是从关系的“水平”方向即行的角度进行 
- 专门的关系运算不仅涉及行而且涉及列

### 2.4.1 传统的集合运算
- 并
- 差
- 交
- 笛卡尔积

### 2.4.2 专门的关系运算
- 选择
- 投影
- 连接
- 除运算
