# 第一章 绪论
我们经常有一个疑问，数据直接存放在文件资源管理器中，由操作系统直接处理为什么不行？事实上，这样做会有很多问题：
- 数据冗余
- 访问困难
- 数据过度耦合
- 原子性问题
- 并发错误
- 安全问题
- ......

因此，我们需要数据库。

## 1.1 数据库系统概述
数据库的地位在软件开发中是十分重要的。这不仅限于程序员。事实上，数据库的存在让任何人都能通过一种高效的方式访问数据。
- 数据库技术产生于60年代末，是数据管理的有效技术，是计算机科学的重要分支。 
- 数据库技术是信息系统的核心和基础，它的出现极大地促进了计算机应用向各行各业的渗透。 
- 数据库已经成为每个人生活中不可缺少的部分。

### 1.1.1 数据库的4个基本概念 
- 数据
- 数据库
- 数据库管理系统
- 数据库系统

#### 数据
- 数据是数据库中存储的基本对象 
- 数据的定义
    - 描述事物的符号记录 
- 数据的种类
    - 数字、文字、图形、图像、音频、视频、学生的档案记录等

#### 数据库
- 数据库的定义
    - 数据库是长期储存在计算机内 、有组织的、可共享的大量数据的集合。 
- 数据库的基本特征
    - 数据按一定的数据模型组织、描述和储存
    - 可为各种用户共享
    - 冗余度较小
    - 数据独立性较高
    - 易扩展

#### 数据库管理系统
- 什么是数据库管理系统
    - 位于用户与操作系统之间的一层数据管理软件
    - 是基础软件，是一个大型复杂的软件系统 
- 数据库管理系统的用途
    - 科学地组织和存储数据、高效地获取和维护数据

#### 数据库管理系统的主要功能
- 数据定义功能
    - 提供数据定义语言（DDL）
    - 定义数据库中的数据对象 
- 数据组织、存储和管理
    - 分类组织、存储和管理各种数据
    - 确定组织数据的文件结构和存取方式
    - 实现数据之间的联系
    - 提供多种存取方法提高存取效率

> DDL, Data-Definition Language, 是一种定义数据库的语言，在SQL中负责定义数据库的功能。

```sql
create table department (
    dept name char (20),
    building char (15), 
    budget numeric (12,2)
);
```

- 数据操纵功能
    - 提供数据操纵语言(DML)
    - 实现对数据库的基本操作（查询、插入、删除和修改） 
- 数据库的事务管理和运行管理
    - 数据库在建立、运行和维护时由数据库管理系统统一管 理和控制
    - 保证数据的安全性、完整性、多用户对数据的并发使用
    - 发生故障后的系统恢复

> DML, Data-Manipulation Language, 在数据库表创建后，用于对数据库进行操作。即俗称“CRUD”或“增删改查”语言。
> - create
> - retrieve
> - update
> - delete
> 
> 在 SQL 中，可以用这些语法便捷的找到想要的数据库内容。

```sql
select instructor.name 
from instructor 
where instructor.dept name = 'History';
```

- 数据库的建立和维护功能
    - 数据库初始数据的装载和转换
    - 数据库转储、恢复功能
    - 数据库的重组织
    - 性能监视、分析等 
- 其它功能
    - 数据库管理系统与网络中其它软件系统的通信
    - 数据库管理系统系统之间的数据转换
    - 异构数据库之间的互访和互操作

#### 数据库系统


- 数据库系统 (Database System, DBS)
- 数据库系统的构成
    - 数据库
    - 数据库管理系统（及其应用开发工具）
    - 应用程序
    - 数据库管理员

![数据库系统](_attachments/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F.png)

### 1.1.2 数据管理技术的产生和发展
- 什么是数据管理
    - 对数据进行分类、组织、编码、存储、检索和维护
    - 是数据处理的中心问题 
- 数据管理技术的发展过程
    - 人工管理阶段（20世纪50年代中之前）
    - 文件系统阶段（20世纪50年代末-60年代中）
    - 数据库系统阶段（20世纪60年代末-现在）
- 数据管理技术的发展动力
    - 应用需求的推动
    - 计算机硬件的发展
    - 计算机软件的发展

### 1.1.3 数据库系统的特点
- 数据结构化 
- 数据的共享性高，冗余度低且易扩充 
- 数据独立性高
    - 物理独立性
    - 逻辑独立性
    - 数据独立性（二级映像）
- 数据由数据库管理系统统一管理和控制
- 数据的**整体结构化**是数据库的主要特征之一，也是数据库系统与文件系统的本质区别 
- 整体结构化
    - 不再仅仅针对某一个应用，而是面向全组织
    - 不仅数据内部结构化，整体是结构化的，数据之间具 有联系
    - 数据记录可以变长
    - 数据的最小存取单位是数据项（文件系统是记录）
    - 数据用数据模型描述，无需应用程序定义
- 数据面向整个系统，可以被多个用户、多个应用 共享使用。 

#### 数据共享的好处
- 减少数据冗余，节约存储空间
- 避免数据之间的不相容性与不一致性
- 使系统易于扩充


#### 数据由数据管理系统统一管理和控制
- 数据库管理系统提供的数据控制功能
    - 数据的安全性保护 • 保护数据以防止不合法的使用造成的数据的泄密和破坏。
    - 数据的完整性检查 • 保证数据的正确性、有效性和相容性。
    - 并发控制 • 对多用户的并发操作加以控制和协调，防止相互干扰而得到错 误的结果。
    - 数据库恢复 • 将数据库从错误状态恢复到某一已知的正确状态。

## 1.2 数据模型
- 数据模型是对现实世界数据特征的抽象。 
- 通俗地讲数据模型就是现实世界的模拟。 
- 数据模型应满足三方面要求
    - 能比较真实地模拟现实世界
    - 容易为人所理解
    - 便于在计算机上实现 
- 数据模型是数据库系统的核心和基础

### 1.2.1 两类数据模型
- 概念模型/信息模型
- 逻辑模型/物理模型

- 客观对象的抽象过程 **两步抽象**
    - 现实世界中的客观对象抽象为概念模型； • 将现实世界抽象为信息世界
    - 把概念模型转换为某一数据库管理系统支持的数据模型。 • 将信息世界转换为机器世界

![两步抽象](_attachments/%E4%B8%A4%E6%AD%A5%E6%8A%BD%E8%B1%A1.png)

### 1.2.2 概念模型
- 概念模型的用途
    - 概念模型用于信息世界的建模
    - 是现实世界到机器世界的一个中间层次
    - 是数据库设计的有力工具
    - 数据库设计人员和用户之间进行交流的语言 
- 对概念模型的基本要求
    - 较强的语义表达能力
    - 简单、清晰、易于用户理解

#### 实体-联系方法（E-R图）
- 实体（Entity）
    - 客观存在并可相互区别的事物称为实体。
    - 可以是具体的人、事、物或抽象的概念。 
- 属性（Attribute）
    - 实体所具有的某一特性称为属性。
    - 一个实体可以由若干个属性来刻画。 
- 码（Key）
    - 唯一标识实体的属性集称为码。
- 实体型（Entity Type）
    - 用实体名及其属性名集合来抽象和刻画同类实体称为 实体型
- 实体集（Entity Set）
    - 同一类型实体的集合称为实体集
- 信息（Relationship）
    - 现实世界中事物内部以及事物之间的联系在信息世界 中反映为实体（型）内部的联系和实体（型）之间的 联系。
- 实体联系方法
    - 用E-R图来描述现实世界的概念模型
- 其他的概念模型表示方法
    - xml
    - json
    - csv
    - etc.

### 1.2.3 数据模型的组成要素
- 数据结构 
- 数据操作 
- 数据的完整性约束条件

### 1.2.4 常用的数据模型
- 层次模型
- 网状模型
- 关系模型
- 面向对象数据模型
- 对象关系数据模型
- 半结构化数据模型

## 1.3 数据库系统的结构
- 数据库系统模式的概念 
- 数据库系统的三级模式结构 
- 数据库的二级映像功能与数据独立性

### 1.3.1 数据库系统模式的概念
- 型和值 Type & Value
- 模式和实例 Schema & Instance

### 1.3.2 数据库系统的三级模式结构
- 模式 Schema
- 外模式 External Schema
- 内模式 Internal Schema

### 1.3.3 数据库的二级映像功能与数据独立性
- 三级模式是对数据的三个抽象级别 
- 二级映象在数据库管理系统内部实现这三个抽象 层次的联系和转换
    - 外模式／模式映像
    - 模式／内模式映像

#### 二级映像
- 数据库模式
    - 即全局逻辑结构是数据库的中心与关键
    - 独立于数据库的其他层次
    - 设计数据库模式结构时应首先确定数据库的逻辑模式
- 数据库的内模式
    - 依赖于它的全局逻辑结构
    - 独立于数据库的用户视图，即外模式
    - 独立于具体的存储设备
    - 将全局逻辑结构中所定义的数据结构及其联系按照一定的物理存储策略进行组织，以达到较好的时间与空 间效率
- 数据库的外模式
    - 面向具体的应用程序
    - 定义在逻辑模式之上
    - 独立于存储模式和存储设备
    - 当应用需求发生较大变化，相应外模式不能满足其视图要求时，该外模式就得做相应改动
    - 设计外模式时应充分考虑到应用的扩充性
- 特定的应用程序
    - 在外模式描述的数据结构上编制的
    - 依赖于特定的外模式
    - 与数据库的模式和存储结构独立
    - 不同的应用程序有时可以共用同一个外模式

#### 二级映像的优点
- 数据库的二级映像
    - 保证了数据库外模式的稳定性
    - 从底层保证了应用程序的稳定性，除非应用需求本身发生变化，否则应用程序一般不需要修改 
- 数据与程序之间的独立性，使得数据的定义和描 述可以从应用程序中分离出去 
- 数据的存取由数据库管理系统管理
    - 简化了应用程序的编制
    - 大大减少了应用程序的维护和修改